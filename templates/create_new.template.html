{%extends 'layout.template.html'%}

{%block title%}Create New Profile{%endblock%}

{%block content%}
<form method='POST'>
    <h1>Create Profile</h1>
    <div>
        <label>First Name</label>
        <input type='text' name='first_name' class='form-control'/>
    </div>
    <div>
        <label>Last Name</label>
        <input type='text' name='last_name' class='form-control'/>
    </div>
    <div>
        <label>Gender</label><br>
        <input type='radio' id='male' name='gender' value='Male'/>
        <label for='male'>Male</label>
        <input type='radio' id='female' name='gender' value='Female'/>
        <label for='female'>Female</label>
    </div>
    <div>
        <label>Date of Birth</label>
        <input type='date' name='dob' class='form-control'/>
    </div>
    <div>
        <label>Religion</label>
        <select name='religion' class='form-control'>
            <option value='Agnostic'>Agnostic</option>
            <option value='Buddhist'>Buddhist</option>
            <option value='Christian'>Christian</option>
            <option value='Catholic'>Catholic</option>
            <option value='Hindu'>Hindu</option>
            <option value='Taoist'>Taoist</option>
            <option value='Free Thinker'>Free Thinker</option>
        </select>
    </div>
    <div>
        <label>Height (cm)</label>
        <input type='number' name='height' class='form-control'/>
    </div>
    <div>
        <label>Languages</label><br>
        <input type='checkbox' class='languages_checkbox' id='English' name='english'/>
        <label for='English'>English</label>
        <input type='checkbox' class='languages_checkbox' id='Chinese' name='chinese'/>
        <label for='Chinese'>Chinese</label>
        <input type='checkbox' class='languages_checkbox' id='Tamil' name='tamil'/>
        <label for='Tamil'>Tamil</label>
        <input type='checkbox' class='languages_checkbox' id='Malay' name='malay'/>
        <label for='Malay'>Malay</label>
    </div>
    <div>
        <label>Self Summary</label>
        <input type='text' name='summary' class='form-control'/>
    </div>
    <div>
        Profile Picture<br>
        <a id="upload_widget" class="cloudinary-button">Upload Image</a>
        <input type="hidden" id="uploaded_file_url" name="uploaded_file_url"/>
        <br/>
        <img id="uploaded-image">
    </div>

    <input type='submit' value='Submit'/>
</form>
{%endblock%}

{%block js%}
<script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>  

<script type="text/javascript">  
var myWidget = cloudinary.createUploadWidget({
  cloudName: '{{cloud_name}}', 
  uploadPreset: '{{upload_preset}}'}, (error, result) => { 
    if (!error && result && result.event === "success") { 
      console.log('Done! Here is the image info: ', result.info); 
      document.querySelector('#uploaded_file_url').value=result.info.url
      document.querySelector('#uploaded-image').src=result.info.thumbnail_url
    }
  }
)

document.getElementById("upload_widget").addEventListener("click", function(){
    myWidget.open();
  }, false);
</script>

{%endblock%}